{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nvar __jsx = React.createElement;\nimport React from \"react\";\nimport Router, { useRouter } from \"next/router\";\nimport { useCookies } from \"react-cookie\";\nimport * as firebase from \"firebase\";\nimport dynamic from \"next/dynamic\";\nvar accessToken;\nvar firebaseToken;\nvar refreshToken;\nvar expiresAt;\n\nvar setTokensFromUrl = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    var search, query, tokens;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            search = window.location.search.substring(1);\n            query = JSON.parse('{\"' + decodeURI(search).replace(/\"/g, '\\\\\"').replace(/&/g, '\",\"').replace(/=/g, '\":\"') + '\"}');\n            tokens = {\n              accessToken: query.access_token,\n              firebaseToken: query.firebase_token,\n              refreshToken: query.refresh_token,\n              expiresAt: query.expires_at\n            };\n            return _context.abrupt(\"return\", tokens);\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function setTokensFromUrl() {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar HandleRedirect = function HandleRedirect() {\n  var _useCookies = useCookies([]),\n      _useCookies2 = _slicedToArray(_useCookies, 2),\n      cookies = _useCookies2[0],\n      setCookie = _useCookies2[1];\n\n  React.useEffect(function () {\n    setTokensFromUrl().then(function (value) {\n      setCookie(\"access_token\", value.accessToken, {\n        path: \"/\",\n        maxAge: 604800\n      });\n      setCookie(\"firebase_token\", value.firebaseToken, {\n        path: \"/\",\n        maxAge: 604800\n      });\n      setCookie(\"refresh_token\", value.refreshToken, {\n        path: \"/\",\n        maxAge: 604800\n      });\n      setCookie(\"expires_at\", value.expiresAt, {\n        path: \"/\",\n        maxAge: 604800\n      });\n      Router.push(\"/activities\");\n    });\n  }, []);\n  return __jsx(\"div\", null, \"success\");\n};\n\nexport default HandleRedirect;","map":null,"metadata":{},"sourceType":"module"}